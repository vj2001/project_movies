(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{256:function(e,t,a){e.exports=a(522)},261:function(e,t,a){},505:function(e,t,a){},506:function(e,t,a){},522:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(4),l=a.n(o),c=(a(261),a(14)),i=a(16),s=a.n(i),m="login_user",u="register_user",d="auth_user",p="logout_user",f="/api/users",v="https://api.themoviedb.org/3/",h="8173927768c1f5a3cd532ecbf01b4ace",E="http://image.tmdb.org/t/p/",g="w1280";var b=a(27),y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(o){var l=Object(b.c)(function(e){return e.user}),c=Object(b.b)();return Object(r.useEffect)(function(){c(function(){var e=s.a.get("".concat(f,"/auth")).then(function(e){return e.data});return{type:d,payload:e}}()).then(function(e){e.payload.isAuth?a&&!e.payload.isAdmin?o.history.push("/"):!1===t&&o.history.push("/"):t&&o.history.push("/login")})},[]),n.a.createElement(e,Object.assign({},o,{user:l}))}},w=a(172),O=a(11);var j=function(e){return n.a.createElement("div",{style:{background:"linear-gradient(to bottom, rgba(0,0,0,0)\n        39%,rgba(0,0,0,0)\n        41%,rgba(0,0,0,0.65)\n        100%),\n        url('".concat(e.image,"'), #1c1c1c"),height:"500px",backgroundSize:"100%, cover",backgroundPosition:"center, center",width:"100%",position:"relative"}},n.a.createElement("div",null,n.a.createElement("div",{style:{position:"absolute",maxWidth:"500px",bottom:"2rem",marginLeft:"2rem"}},n.a.createElement("h2",{style:{color:"white"}},"  ",e.title," "),n.a.createElement("p",{style:{color:"white",fontSize:"1rem"}}," ",e.text))))},I=a(523),x=a(52);var S=function(e){return e.landingPage?n.a.createElement(I.a,{lg:6,md:8,xs:24},n.a.createElement("div",{style:{position:"relative"}},n.a.createElement(x.b,{to:"/movie/".concat(e.movieId)},n.a.createElement("img",{style:{width:"100%",height:"320px"},src:e.image,alt:e.movieName})))):n.a.createElement(I.a,{lg:4,md:6,xs:12},n.a.createElement("div",{style:{position:"relative"}},n.a.createElement("img",{style:{width:"50%",height:"130px"},src:e.image,alt:e.characterName}),console.log(e.characterName)))},k=a(524);var N=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),a=t[0],o=t[1],l=Object(r.useState)(null),c=Object(O.a)(l,2),i=c[0],s=c[1],m=Object(r.useState)(0),u=Object(O.a)(m,2),d=u[0],p=u[1];Object(r.useEffect)(function(){var e="".concat(v,"movie/popular?api_key=").concat(h,"&language=en-US&page=1");f(e)},[]);var f=function(e){fetch(e).then(function(e){return e.json()}).then(function(e){console.log(e),o([].concat(Object(w.a)(a),Object(w.a)(e.results))),s(e.results[Math.floor(20*Math.random())]),p(e.page)})};return n.a.createElement("div",{style:{width:"100%",margin:"0"}},i&&n.a.createElement(j,{image:"".concat(E,"w1280").concat(i.backdrop_path),title:i.original_title,text:i.overview}),n.a.createElement("div",{style:{width:"85%",margin:"1rem auto"}},n.a.createElement("h2",null,"Movies by latest"),n.a.createElement("hr",null),n.a.createElement(k.a,{gutter:[16,16]},a&&a.map(function(e,t){return n.a.createElement(n.a.Fragment,{key:t},n.a.createElement(S,{landingPage:!0,image:e.poster_path?"".concat(E,"w500").concat(e.poster_path):null,movieId:e.id,movieName:e.original_title}))}))),n.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},n.a.createElement("button",{onClick:function(){var e="".concat(v,"movie/popular?api_key=").concat(h,"&language=en-US&page=").concat(d+1);f(e)}}," Load More")))},C=a(124),P=a(35),F=a(527),_=a(528),T=a(530),q=a(8),L=a(173),D=F.a.Title;var R=function(e){var t=Object(b.b)(),a=Object(r.useState)(""),o=Object(O.a)(a,2),l=o[0],c=o[1],i=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return n.a.createElement(C.a,{initialValues:{email:i,password:""},validationSchema:P.object().shape({email:P.string().email("Email is invalid").required("Email is required"),password:P.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,r){var n=r.setSubmitting;setTimeout(function(){var r={email:a.email,password:a.password};t(function(e){var t=s.a.post("".concat(f,"/login"),e).then(function(e){return e.data});return{type:m,payload:t}}(r)).then(function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),e.history.push("/")):c("Check out your Account or Password again")}).catch(function(e){c("Check out your Account or Password again"),setTimeout(function(){c("")},3e3)}),n(!1)},500)}},function(e){console.log(e);var t=e.values,a=e.touched,r=e.errors,o=e.isSubmitting,c=e.handleChange,i=e.handleBlur,s=e.handleSubmit;return n.a.createElement("div",{className:"app"},n.a.createElement(D,{level:2},"Log In"),n.a.createElement("form",{onSubmit:s,style:{width:"350px"}},n.a.createElement(_.a.Item,{required:!0},n.a.createElement(T.a,{id:"email",prefix:n.a.createElement(q.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:t.email,onChange:c,onBlur:i,className:r.email&&a.email?"text-input error":"text-input"}),r.email&&a.email&&n.a.createElement("div",{className:"input-feedback"},r.email)),n.a.createElement(_.a.Item,{required:!0},n.a.createElement(T.a,{id:"password",prefix:n.a.createElement(q.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:c,onBlur:i,className:r.password&&a.password?"text-input error":"text-input"}),r.password&&a.password&&n.a.createElement("div",{className:"input-feedback"},r.password)),l&&n.a.createElement("label",null,n.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},l)),n.a.createElement(_.a.Item,null,n.a.createElement("div",null,n.a.createElement(L.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:o,onSubmit:s},"Log in")),"Or ",n.a.createElement("a",{href:"/register"},"register now!"))))})},A=a(93),B=a.n(A),M={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},z={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var W=function(e){var t=Object(b.b)();return n.a.createElement(C.a,{initialValues:{email:"",lastName:"",name:"",password:"",confirmPassword:""},validationSchema:P.object().shape({name:P.string().required("Name is required"),lastName:P.string().required("Last Name is required"),email:P.string().email("Email is invalid").required("Email is required"),password:P.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:P.string().oneOf([P.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,r){var n=r.setSubmitting;setTimeout(function(){var r={email:a.email,password:a.password,name:a.name,lastname:a.lastname,image:"http://gravatar.com/avatar/".concat(B()().unix(),"?d=identicon")};t(function(e){var t=s.a.post("".concat(f,"/register"),e).then(function(e){return e.data});return{type:u,payload:t}}(r)).then(function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)}),n(!1)},500)}},function(e){var t=e.values,a=e.touched,r=e.errors,o=e.isSubmitting,l=e.handleChange,c=e.handleBlur,i=e.handleSubmit;return n.a.createElement("div",{className:"app"},n.a.createElement("h2",null,"Sign up"),n.a.createElement(_.a,Object.assign({style:{minWidth:"375px"}},M,{onSubmit:i}),n.a.createElement(_.a.Item,{required:!0,label:"Name"},n.a.createElement(T.a,{id:"name",placeholder:"Enter your name",type:"text",value:t.name,onChange:l,onBlur:c,className:r.name&&a.name?"text-input error":"text-input"}),r.name&&a.name&&n.a.createElement("div",{className:"input-feedback"},r.name)),n.a.createElement(_.a.Item,{required:!0,label:"Last Name"},n.a.createElement(T.a,{id:"lastName",placeholder:"Enter your Last Name",type:"text",value:t.lastName,onChange:l,onBlur:c,className:r.lastName&&a.lastName?"text-input error":"text-input"}),r.lastName&&a.lastName&&n.a.createElement("div",{className:"input-feedback"},r.lastName)),n.a.createElement(_.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:r.email&&a.email?"error":"success"},n.a.createElement(T.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:l,onBlur:c,className:r.email&&a.email?"text-input error":"text-input"}),r.email&&a.email&&n.a.createElement("div",{className:"input-feedback"},r.email)),n.a.createElement(_.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:r.password&&a.password?"error":"success"},n.a.createElement(T.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:l,onBlur:c,className:r.password&&a.password?"text-input error":"text-input"}),r.password&&a.password&&n.a.createElement("div",{className:"input-feedback"},r.password)),n.a.createElement(_.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},n.a.createElement(T.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:l,onBlur:c,className:r.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),r.confirmPassword&&a.confirmPassword&&n.a.createElement("div",{className:"input-feedback"},r.confirmPassword)),n.a.createElement(_.a.Item,z,n.a.createElement(L.a,{onClick:i,type:"primary",disabled:o},"Submit"))))})},U=a(529);var V=function(e){return n.a.createElement(U.a,{mode:e.mode},n.a.createElement(U.a.Item,{key:"mail"},n.a.createElement("a",{href:"/"},"Home")),n.a.createElement(U.a.Item,{key:"favorite"},n.a.createElement("a",{href:"/favorite"},"Favorite")))};var H=function(e){var t=Object(b.c)(function(e){return e.user});return t.userData&&!t.userData.isAuth?n.a.createElement(U.a,{mode:e.mode},n.a.createElement(U.a.Item,{key:"mail"},n.a.createElement("a",{href:"/login"},"Signin")),n.a.createElement(U.a.Item,{key:"app"},n.a.createElement("a",{href:"/register"},"Signup"))):n.a.createElement(U.a,{mode:e.mode},n.a.createElement(U.a.Item,{key:"user"},t.userData&&n.a.createElement("h3",null,"Welcome ",t.userData.name)),n.a.createElement(U.a.Item,{key:"logout"},n.a.createElement("a",{onClick:function(){s.a.get("".concat(f,"/logout")).then(function(e){200===e.status?(localStorage.removeItem("userId"),window.location.reload()):alert("Log Out Failed")})}},"Logout")))};a(505);var J=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2);return t[0],t[1],n.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"}},n.a.createElement("div",{className:"menu__logo"},n.a.createElement("a",{href:"/"},"SPECIALS")),n.a.createElement("div",{className:"menu__container"},n.a.createElement("div",{className:"menu_left"},n.a.createElement(V,{mode:"horizontal"})),n.a.createElement("div",{className:"menu_rigth"},n.a.createElement(H,{mode:"horizontal"}))))};a(506);var G=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),a=t[0],o=t[1];Object(r.useEffect)(function(){l()},[]);var l=function(){s.a.post("/api/favorite/getFavoredMovie",{userFrom:localStorage.getItem("userId")}).then(function(e){e.data.success?o(e.data.favorites):alert("ERROR")})},c=a.map(function(e,t){return n.a.createElement("div",null,e.moviePost?n.a.createElement("img",{src:"".concat(E,"w500").concat(e.moviePost)}):"no image"),n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.movieTitle),n.a.createElement("td",null,n.a.createElement("button",{onClick:function(){return function(e,t){var a={movieId:e,userFrom:localStorage.getItem("userId")};s.a.post("/api/favorite/removeFromFavorite",a).then(function(e){e.data.success?l():alert("ERROR")}),console.log(t)}(e.movieId,e.userFrom)}},"Remove")))});return n.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},n.a.createElement("h2",null," Favorite Movies "),n.a.createElement("hr",null),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Movie Title"),n.a.createElement("td",null,"Remove from favorites"))),n.a.createElement("tbody",null,c)))},K=a(97),Q=a.n(K),X=a(171);var Y=function(e){var t=e.movieId,a=e.userFrom,o=e.movieInfo.title,l=e.movieInfo.backdrop_path,c=e.movieInfo.runtime,i=Object(r.useState)(0),m=Object(O.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)(!1),f=Object(O.a)(p,2),v=f[0],h=f[1],E={userFrom:a,movieId:t,movieTitle:o,moviePost:l,movieRunTime:c};return Object(r.useEffect)(function(){s.a.post("/api/favorite/favoriteNumber",E).then(function(e){d(e.data.favoriteNumber),e.data.success||alert("failed to get info")}),s.a.post("/api/favorite/favorited",E).then(function(e){e.data.success?h(e.data.favorited):alert("failed to get info")})},[]),n.a.createElement("div",null,n.a.createElement(L.a,{style:{color:"white",backgroundColor:"black"},onClick:function(){localStorage.getItem("userId")?v?s.a.post("/api/favorite/removeFromFavorite",E).then(function(e){e.data.success?(d(u-1),h(!v)):alert("Favorite error")}):s.a.post("/api/favorite/addToFavorite",E).then(function(e){e.data.success?(d(u+1),h(!v)):alert("Favorite error")}):alert("Please Login First")}},v?" Not Favorite":"Add to Favorites "),n.a.createElement("br",null),n.a.createElement("p",{style:{color:"red"}},u," users have added this movie to Favorites"))},Z=a(525),$=a(526);T.a.TextArea;var ee=function(e){return n.a.createElement("div",null,n.a.createElement(Z.a,{author:e.comment.writer.name,avatar:n.a.createElement($.a,{src:e.comment.writer.image,alt:"image"}),content:n.a.createElement("p",null,e.comment.content)}))},te=T.a.TextArea,ae=F.a.Title;var re=function(e){var t=Object(b.c)(function(e){return e.user}),a=Object(r.useState)(""),o=Object(O.a)(a,2),l=o[0],c=o[1],i=function(a){if(a.preventDefault(),t.userData&&!t.userData.isAuth)return alert("Please Log in first");var r={content:l,writer:t.userData._id,postId:e.postId};console.log(r),s.a.post("/api/comment/saveComment",r).then(function(t){t.data.success?(c(""),e.refreshFunction(t.data.result)):alert("Failed to save Comment")})};return n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement(ae,{level:3}," Share your opinions about ",e.movieTitle," "),n.a.createElement("hr",null),console.log(e.CommentLists),e.CommentLists&&e.CommentLists.map(function(t,a){return!t.responseTo&&n.a.createElement(n.a.Fragment,null,n.a.createElement(ee,{comment:t,postId:e.postId,refreshFunction:e.refreshFunction}))}),e.CommentLists&&0===e.CommentLists.length&&n.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"}},"Be the first one who shares your thought about this movie"),n.a.createElement("form",{style:{display:"flex"},onSubmit:i},n.a.createElement(te,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){c(e.currentTarget.value)},value:l,placeholder:"write some comments"}),n.a.createElement("br",null),n.a.createElement(L.a,{style:{width:"20%",height:"52px"},onClick:i},"Submit")))},ne=a(531);var oe=function(e){var t=e.movie;return n.a.createElement(ne.a,{style:{fontWeight:"bold"},title:"Movie Info",bordered:!0},n.a.createElement(ne.a.Item,{label:"Title"},t.original_title),n.a.createElement(ne.a.Item,{label:"Releasing Date"},t.release_date),n.a.createElement(ne.a.Item,{label:"Running Time"},t.runtime," mins"),n.a.createElement(ne.a.Item,{label:"status",span:1},t.status))},le=a(253);var ce=function(e){var t=e.match.params.movieId,a=Object(r.useState)(!1),o=Object(O.a)(a,2),l=o[0],c=o[1],i=Object(r.useState)([]),m=Object(O.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)([]),f=Object(O.a)(p,2),b=f[0],y=f[1],w=Object(r.useState)([]),I=Object(O.a)(w,2),x=I[0],N=I[1],C=Object(r.useState)(!0),P=Object(O.a)(C,2),F=P[0],_=P[1],T=Object(r.useState)(!0),q=Object(O.a)(T,2),D=q[0],R=q[1],A=Object(r.useState)(!1),B=Object(O.a)(A,2),M=B[0],z=B[1],W=Object(r.useState)(),U=Object(O.a)(W,2),V=U[0],H=U[1],J={movieId:t};Object(r.useEffect)(Object(X.a)(Q.a.mark(function e(){var a,r,n,o,l;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(v,"movie/").concat(t,"/videos?api_key=").concat(h,"&language=en-US"),e.next=3,s.a.get(a);case 3:for(r=e.sent,n=r.data.results.length,o=0;o<n;o++)"Trailer"==r.data.results[o].type&&H(r.data.results[o].key);l="".concat(v,"movie/").concat(t,"?api_key=").concat(h,"&language=en-US"),G(l),s.a.post("/api/comment/getComments",J).then(function(e){console.log(e),e.data.success?(console.log("response.data.comments",e.data.comments),N(e.data.comments)):alert("Failed to get comments Info")});case 9:case"end":return e.stop()}},e)})),[]);var G=function(e){fetch(e).then(function(e){return e.json()}).then(function(e){console.log(e),d(e),_(!1);var a="".concat(v,"movie/").concat(t,"/credits?api_key=").concat(h);fetch(a).then(function(e){return e.json()}).then(function(e){console.log(e),y(e.cast)}),R(!1)}).catch(function(e){return console.error("Error:",e)})};Object(r.useEffect)(function(){},[V]);var K=function(){var e=Object(X.a)(Q.a.mark(function e(){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(!l);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return n.a.createElement("div",null,F?n.a.createElement("div",null,"loading..."):n.a.createElement(j,{image:"".concat(E).concat(g).concat(u.backdrop_path),title:u.original_title,text:u.overview}),n.a.createElement("div",{style:{width:"85%",margin:"1rem auto"}},n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},n.a.createElement(Y,{movieInfo:u,movieId:t,userFrom:localStorage.getItem("userId")})),n.a.createElement("br",null),n.a.createElement("br",null),F?n.a.createElement("div",null,"LOADING !! Please wait.."):n.a.createElement(oe,{movie:u}),n.a.createElement("br",null),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"2rem"}},n.a.createElement(L.a,{style:{color:"purple"},onClick:function(){z(!M)}},"Toggle Actor Names ")),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"2rem"}},n.a.createElement(L.a,{style:{color:"purple"},onClick:K},"Watch Trailer")),l&&n.a.createElement(le.a,{videoId:V,opts:{height:"390",width:"100%",playerVars:{autoplay:1}}}),M&&n.a.createElement(k.a,{gutter:[16,16]},D?n.a.createElement("div",null,"loading..."):b.map(function(e,t){return e.profile_path&&n.a.createElement(S,{image:e.profile_path?"".concat(E,"w500").concat(e.profile_path):null,characterName:e.name})})),n.a.createElement("br",null),n.a.createElement(re,{movieTitle:u.original_title,CommentLists:x,postId:t,refreshFunction:function(e){N(x.concat(e))}})))};var ie=function(){return n.a.createElement(r.Suspense,{fallback:n.a.createElement("div",null,"Loading...")},n.a.createElement(J,null),n.a.createElement("div",{style:{paddingTop:"69px",minHeight:"calc(100vh - 80px)"}},n.a.createElement(c.c,null,n.a.createElement(c.a,{exact:!0,path:"/",component:y(N,null)}),n.a.createElement(c.a,{exact:!0,path:"/login",component:y(R,!1)}),n.a.createElement(c.a,{exact:!0,path:"/register",component:y(W,!1)}),n.a.createElement(c.a,{exact:!0,path:"/movie/:movieId",component:y(ce,null)}),n.a.createElement(c.a,{exact:!0,path:"/favorite",component:y(G,!0)}))))},se=a(66),me=a(250);function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach(function(t){Object(me.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pe=Object(se.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return de({},e,{register:t.payload});case m:return de({},e,{loginSucces:t.payload});case d:return de({},e,{userData:t.payload});case p:return de({},e);default:return e}}}),fe=a(251),ve=a.n(fe),he=a(252),Ee=Object(se.a)(ve.a,he.a)(se.d);l.a.render(n.a.createElement(b.a,{store:Ee(pe)},n.a.createElement(x.a,null,n.a.createElement(ie,null))),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.548fb4d2.chunk.js.map